/* appgyver.js (full) version 0.9.1 */
((function(){var a,b,c=Array.prototype.slice;a=function(){function a(a){var b,d,e,f;return e="done fail isResolved isRejected promise then always pipe".split(" "),f={},f._Deferred=function(){var a,b,d,e,f,g,h,i;return i="pending",b=[],h=void 0,g=0,e=void 0,f=void 0,a=void 0,d={done:function(){var a,h,i,j,k;h=1<=arguments.length?c.call(arguments,0):[],g&&(g=0,i=1);for(j=0,k=h.length;j<k;j++)a=h[j],b.push(a);return i&&d.resolveWith.apply(d,[f].concat(c.call(e))),this},resolve:function(){var a;return a=1<=arguments.length?c.call(arguments,0):[],d.resolveWith.apply(d,[d].concat(c.call(a)))},resolveWith:function(){var d,j,k;j=arguments[0],d=2<=arguments.length?c.call(arguments,1):[];if(!a&&!g&&!h){h=1;try{while(b[0])(k=b.shift()).call.apply(k,[j].concat(c.call(d)))}finally{h=0,g=1,f=j,e=d,i="resolved"}}return this},cancel:function(){return a=1,b=[],this},isResolved:function(){return!!h||!!g},state:function(){return i}},d},b=new f._Deferred,d=new f._Deferred,b.always=function(){var a,d;return a=1<=arguments.length?c.call(arguments,0):[],(d=b.done.apply(b,a)).fail.apply(d,a)},b.fail=d.done,b.reject=d.resolve,b.rejectWith=d.resolveWith,b.isRejected=d.isResolved,b.pipe=function(a,b){},b.then=function(a,c){return b.done(a).fail(c),b},b.promise=function(a){var b,c,d;a==null&&(a={});for(c=0,d=e.length;c<d;c++)b=e[c],a[b]=this[b];return a},b.done(d.cancel).fail(b.cancel),delete b.cancel,typeof a=="function"&&a.call(b,b),b}return a}(),b=function(){function b(){return a}return b}(),window.DeferredEngine=b})).call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=function(a,b){return function(){return a.apply(b,arguments)}},s=Array.prototype.slice;e=function(){function a(){}return a.prototype.send=function(a,b){},a}(),window.AndroidCommunication=function(){function a(){return this.message_handler=r(this.message_handler,this),AndroidAPIBridge.registerHandler("AG.API.ws.message_handler"),window.AG_SCREEN_ID=AndroidAPIBridge.getAGScreenId(),window.AG_LAYER_ID=AndroidAPIBridge.getAGLayerId(),window.AG_VIEW_ID=AndroidAPIBridge.getAGViewId(),!0}return a.prototype.uid=0,a.prototype.callbacks={},a.prototype.message_handler=function(a){var b;b=JSON.parse(a);if((b!=null?b.callback:void 0)!=null&&this.callbacks[b.callback]!=null)return this.callbacks[b.callback].call(b.parameters,b.parameters)},a.prototype.send=function(a,b){var c,d,e,f=this;return(b!=null?b.callbacks:void 0)!=null?(c=""+a+"_"+this.uid++,d={},b.callbacks.recurring!=null&&(d.recurring=""+c+"_recurring",this.callbacks[d.recurring]=function(a){return b.callbacks.recurring.call(a,a)}),b.callbacks.success!=null&&(d.success=""+c+"_success",this.callbacks[d.success]=function(a){return delete f.callbacks[d.success],delete f.callbacks[d.failure],b.callbacks.success.call(a,a)}),b.callbacks.failure!=null&&(d.failure=""+c+"_fail",this.callbacks[d.failure]=function(a){return delete f.callbacks[d.success],delete f.callbacks[d.failure],b.callbacks.failure.call(a,a)})):d={},e=JSON.stringify({method:a,parameters:(b!=null?b.parameters:void 0)!=null?b.parameters:{},callbacks:d}),AndroidAPIBridge.send(e)},a}(),window.WebSocketCommunication=function(){function a(){this.send=r(this.send,this),this.message_handler=r(this.message_handler,this),this.map_context=r(this.map_context,this),this.reopen=r(this.reopen,this),this.websocket=new WebSocket("ws://localhost:31337"),this.websocket.onmessage=this.message_handler,this.websocket.onclose=this.reopen,this.websocket.addEventListener("open",this.map_context)}return a.prototype.uid=0,a.prototype.callbacks={},a.prototype.reopen=function(){return this.websocket=new WebSocket("ws://localhost:31337"),this.websocket.onmessage=this.message_handler,this.websocket.onclose=this.reopen,this.websocket.addEventListener("open",this.map_context),!1},a.prototype.map_context=function(){if(typeof AG_SCREEN_ID!="undefined"&&AG_SCREEN_ID!==null&&typeof AG_LAYER_ID!="undefined"&&AG_LAYER_ID!==null&&typeof AG_VIEW_ID!="undefined"&&AG_VIEW_ID!==null)return this.send("mapWebSocketConnectionToContext",{parameters:{screen:AG_SCREEN_ID,layer:AG_LAYER_ID,view:AG_VIEW_ID}})},a.prototype.message_handler=function(a){var b;b=JSON.parse(a.data),console.log(b);if((b!=null?b.callback:void 0)!=null&&this.callbacks[b.callback]!=null)return this.callbacks[b.callback].call(b.parameters,b.parameters)},a.prototype.send=function(a,b){var c,d,e,f=this;return(b!=null?b.callbacks:void 0)!=null?(c=""+a+"_"+this.uid++,d={},b.callbacks.recurring!=null&&(d.recurring=""+c+"_recurring",this.callbacks[d.recurring]=function(a){return b.callbacks.recurring.call(a,a)}),b.callbacks.success!=null&&(d.success=""+c+"_success",this.callbacks[d.success]=function(a){return delete f.callbacks[d.success],delete f.callbacks[d.failure],b.callbacks.success.call(a,a)}),b.callbacks.failure!=null&&(d.failure=""+c+"_fail",this.callbacks[d.failure]=function(a){return delete f.callbacks[d.success],delete f.callbacks[d.failure],b.callbacks.failure.call(a,a)})):d={},e=JSON.stringify({method:a,parameters:(b!=null?b.parameters:void 0)!=null?b.parameters:{},callbacks:d}),this.websocket.readyState===0?this.websocket.addEventListener("open",function(){return f.websocket.send(e)}):this.websocket.send(e)},a}(),a=function(){function a(a){this.cancelAllDownloads=r(this.cancelAllDownloads,this),this.recordEvent=r(this.recordEvent,this),this.popLayer=r(this.popLayer,this),this.reloadStartURL=r(this.reloadStartURL,this),this.cameraFlashToggle=r(this.cameraFlashToggle,this),this.cameraFlashOff=r(this.cameraFlashOff,this),this.cameraFlashOn=r(this.cameraFlashOn,this),this.getUserLocale=r(this.getUserLocale,this),this.removeAllWSEventListeners=r(this.removeAllWSEventListeners,this),this.addWSEventListener=r(this.addWSEventListener,this),this.previewFile=r(this.previewFile,this),this.choosePicture=r(this.choosePicture,this),this.hideNavigationBarRightButton=r(this.hideNavigationBarRightButton,this),this.showNavigationBarRightButton=r(this.showNavigationBarRightButton,this),this.openLayer=r(this.openLayer,this),this.hideNavigationBar=r(this.hideNavigationBar,this),this.showNavigationBar=r(this.showNavigationBar,this),this.ping=r(this.ping,this),this.takeVideo=r(this.takeVideo,this),this.unzip=r(this.unzip,this),this.writeFile=r(this.writeFile,this),this.downloadFile=r(this.downloadFile,this),this.game=r(this.game,this),this.removeFileOrFolder=r(this.removeFileOrFolder,this),this.takePicture=r(this.takePicture,this),this.getIPAddress=r(this.getIPAddress,this),this.takeScreenshot=r(this.takeScreenshot,this),this.play=r(this.play,this),this.stopRecordingAudio=r(this.stopRecordingAudio,this),this.startRecordingAudio=r(this.startRecordingAudio,this),this.say=r(this.say,this),this.alert=r(this.alert,this),this.log=r(this.log,this),this.ws=a}return a.prototype.send=function(){throw"AG.API communication module not loaded."},a.prototype.log=function(a){return this.ws.send("log",{parameters:{text:a}})},a.prototype.alert=function(a,b){return this.ws.send("alert",{parameters:{title:a,message:b}})},a.prototype.say=function(a){return this.ws.send("say",{parameters:{text:a}})},a.prototype.startRecordingAudio=function(a){return this.ws.send("startRecordingAudio",{parameters:{filenameWithPath:""+a}})},a.prototype.stopRecordingAudio=function(){return this.ws.send("stopRecordingAudio")},a.prototype.play=function(a){return this.ws.send("play",{parameters:{filenameWithPath:a}})},a.prototype.takeScreenshot=function(a,b){return this.ws.send("takeScreenshot",{parameters:{},callbacks:{success:a,failure:b}})},a.prototype.getIPAddress=function(a,b){return this.ws.send("getIPAddress",{parameters:{},callbacks:{success:a,failure:b}})},a.prototype.takePicture=function(a,b,c){var d;return d=function(a){return a.imagePath="../../"+a.imagePath,b.call(a,a)},this.ws.send("takePicture",{parameters:{filenameWithPath:a},callbacks:{success:d,failure:c}})},a.prototype.removeFileOrFolder=function(a,b,c){return this.ws.send("removeFileOrDirectory",{parameters:{path:a},callbacks:{success:b,failure:c}})},a.prototype.game=function(){return this.ws.send("game")},a.prototype.downloadFile=function(a,b,c,d,e){return this.ws.send("downloadFile",{parameters:{filenameWithPath:a,url:b},callbacks:{success:c,failure:d,recurring:e}})},a.prototype.writeFile=function(a,b,c,d){return this.ws.send("writeFile",{parameters:{filenameWithPath:a,contents:b},callbacks:{success:c,failure:d}})},a.prototype.unzip=function(a,b,c,d){return this.ws.send("unzip",{parameters:{filenameWithPath:a,path:b},callbacks:{success:c,failure:d}})},a.prototype.takeVideo=function(a,b,c){return this.ws.send("takeVideo",{parameters:{filenameWithPath:a},callbacks:{success:b,failure:c}})},a.prototype.ping=function(a,b,c){return this.ws.send("ping",{parameters:{payload:a},callbacks:{success:b,failure:c}})},a.prototype.showNavigationBar=function(a,b){return this.ws.send("showNavigationBar",{parameters:{screen:AG_SCREEN_ID,layer:AG_LAYER_ID,view:AG_VIEW_ID,title:a,titleImagePath:b}})},a.prototype.hideNavigationBar=function(){return this.ws.send("hideNavigationBar",{parameters:{screen:AG_SCREEN_ID,layer:AG_LAYER_ID,view:AG_VIEW_ID}})},a.prototype.openLayer=function(a,b,c,d,e,f){var g;return g={screen:AG_SCREEN_ID,layer:AG_LAYER_ID,view:AG_VIEW_ID,url:a,hidesNavigationBar:b},c!=null&&(g.pushAnimation=c,g.pushAnimationDuration=1),g.pushAnimationDuration==null&&(g.pushAnimationDuration=d),e!=null&&(g.popAnimation=e,g.popAnimationDuration=1),g.popAnimationDuration==null&&(g.popAnimationDuration=f),this.ws.send("openLayer",{parameters:g})},a.prototype.showNavigationBarRightButton=function(a,b,c,d){return this.ws.send("showNavigationBarRightButton",{parameters:{screen:AG_SCREEN_ID,layer:AG_LAYER_ID,view:AG_VIEW_ID,title:a},callbacks:{recurring:b,success:d,failure:c}})},a.prototype.hideNavigationBarRightButton=function(){return this.ws.send("hideNavigationBarRightButton",{parameters:{screen:AG_SCREEN_ID,layer:AG_LAYER_ID,view:AG_VIEW_ID}})},a.prototype.choosePicture=function(a,b,c,d,e,f,g){var h;return h=function(a){return a.imagePath="../../"+a.imagePath,f.call(a,a)},this.ws.send("choosePicture",{parameters:{filenameWithPath:a,cameraButtonTitle:b,libraryButtonTitle:c,cancelButtonTitle:d,dialogTitle:e},callbacks:{success:h,failure:g}})},a.prototype.previewFile=function(a,b,c){return this.ws.send("previewFile",{parameters:{filenameWithPath:a},callbacks:{success:b,failure:c}})},a.prototype.addWSEventListener=function(a,b,c,d){return this.ws.send("addEventListener",{parameters:{screen:AG_SCREEN_ID,layer:AG_LAYER_ID,view:AG_VIEW_ID,event:a},callbacks:{recurring:b,success:c,failure:d}})},a.prototype.removeAllWSEventListeners=function(a,b){return this.ws.send("removeAllEventListeners",{parameters:{screen:AG_SCREEN_ID,layer:AG_LAYER_ID,view:AG_VIEW_ID},callbacks:{success:a,failure:b}})},a.prototype.getUserLocale=function(a,b){return this.ws.send("getUserLocale",{callbacks:{success:a,failure:b}})},a.prototype.cameraFlashOn=function(a,b){return this.ws.send("cameraFlashOn",{callbacks:{success:a,failure:b}})},a.prototype.cameraFlashOff=function(a,b){return this.ws.send("cameraFlashOff",{callbacks:{success:a,failure:b}})},a.prototype.cameraFlashToggle=function(a,b){return this.ws.send("cameraFlashToggle",{callbacks:{success:a,failure:b}})},a.prototype.reloadStartURL=function(a,b){return this.ws.send("reloadStartURL",{parameters:{screen:AG_SCREEN_ID,layer:AG_LAYER_ID,view:AG_VIEW_ID},callbacks:{success:a,failure:b}})},a.prototype.popLayer=function(){return this.ws.send("popLayer",{parameters:{screen:AG_SCREEN_ID,layer:AG_LAYER_ID,view:AG_VIEW_ID}})},a.prototype.recordEvent=function(a,b,c){return this.ws.send("recordEvent",{parameters:{type:a,attributes:b},callbacks:{success:c}})},a.prototype.cancelAllDownloads=function(a,b){return this.ws.send("cancelAllDownloads",{success:a,failure:b})},a}(),l=function(){function a(){this.popLayer=r(this.popLayer,this),this.reloadStartURL=r(this.reloadStartURL,this),this.hideNavigationBarRightButton=r(this.hideNavigationBarRightButton,this),this.showNavigationBarRightButton=r(this.showNavigationBarRightButton,this),this.openLayer=r(this.openLayer,this),this.hideNavigationBar=r(this.hideNavigationBar,this),this.showNavigationBar=r(this.showNavigationBar,this),this.alert=r(this.alert,this)}return a.prototype.alert=function(a,b){return AG.API.alert(a,b)},a.prototype.showNavigationBar=function(a){return a==null&&(a={}),Object.prototype.toString.call(a)==="[object String]"&&(a={title:a}),AG.API.showNavigationBar(a.title,a.titleImagePath)},a.prototype.hideNavigationBar=function(){return AG.API.hideNavigationBar()},a.prototype.openLayer=function(a,b){return AG.API.openLayer(a,(b!=null?b.hidesNavigationBar:void 0)||!1,b!=null?b.pushAnimation:void 0,b!=null?b.pushAnimationDuration:void 0,b!=null?b.popAnimation:void 0,b!=null?b.popAnimationDuration:void 0)},a.prototype.showNavigationBarRightButton=function(a,b,c,d){return AG.API.showNavigationBarRightButton(a,b,c,d)},a.prototype.hideNavigationBarRightButton=function(){return AG.API.hideNavigationBarRightButton()},a.prototype.reloadStartURL=function(){return AG.API.reloadStartURL()},a.prototype.popLayer=function(){return AG.API.popLayer()},a}(),b=function(){function a(){this.stopTracking=r(this.stopTracking,this),this.startTracking=r(this.startTracking,this),this.triggerCallbacks=r(this.triggerCallbacks,this),this.removeAllEventListeners=r(this.removeAllEventListeners,this),this.removeEventListener=r(this.removeEventListener,this),this.addEventListener=r(this.addEventListener,this)}return a.prototype.listener=null,a.prototype.callbacks={},a.prototype.addEventListener=function(a){var b;return b=(new Date).getTime(),AG.accelerometer.callbacks[b]=a,b},a.prototype.removeEventListener=function(a){return delete this.callbacks[a]},a.prototype.removeAllEventListeners=function(){return this.callbacks={}},a.prototype.triggerCallbacks=function(a,b,c,d){var e,f,g,h;g=this.callbacks,h=[];for(f in g)e=g[f],h.push(e.call(null,a,b,c,d));return h},a.prototype.startTracking=function(){return this.listener=function(a){return AG.accelerometer.triggerCallbacks(a.acceleration,a.accelerationIncludingGravity,a.rotationRate,a.interval)},window.addEventListener("devicemotion",this.listener,!0)},a.prototype.stopTracking=function(){return window.removeEventListener("devicemotion",this.listener,!0),this.listener=null},a}(),m=function(){function a(){this.stopTracking=r(this.stopTracking,this),this.startTracking=r(this.startTracking,this),this.triggerCallbacks=r(this.triggerCallbacks,this),this.removeAllEventListeners=r(this.removeAllEventListeners,this),this.removeEventListener=r(this.removeEventListener,this),this.addEventListener=r(this.addEventListener,this)}return a.prototype.listener=null,a.prototype.callbacks={},a.prototype.addEventListener=function(a){var b;return b=(new Date).getTime(),AG.gyroscope.callbacks[b]=a,b},a.prototype.removeEventListener=function(a){return delete this.callbacks[a]},a.prototype.removeAllEventListeners=function(){return this.callbacks={}},a.prototype.triggerCallbacks=function(a,b,c){var d,e,f,g;f=this.callbacks,g=[];for(e in f)d=f[e],g.push(d.call(null,a,b,c));return g},a.prototype.startTracking=function(){return this.listener=function(a){return AG.gyroscope.triggerCallbacks(a.alpha,a.beta,a.gamma)},window.addEventListener("deviceorientation",this.listener,!0)},a.prototype.stopTracking=function(){return window.removeEventListener("deviceorientation",this.listener,!0),this.listener=null},a}(),f=function(){function a(){this.stopTracking=r(this.stopTracking,this),this.startTracking=r(this.startTracking,this),this.triggerCallbacks=r(this.triggerCallbacks,this),this.removeAllEventListeners=r(this.removeAllEventListeners,this),this.removeEventListener=r(this.removeEventListener,this),this.addEventListener=r(this.addEventListener,this)}return a.prototype.listener=null,a.prototype.callbacks={},a.prototype.addEventListener=function(a){var b;return b=(new Date).getTime(),AG.compass.callbacks[b]=a,b},a.prototype.removeEventListener=function(a){return delete this.callbacks[a]},a.prototype.removeAllEventListeners=function(){return this.callbacks={}},a.prototype.triggerCallbacks=function(a,b){var c,d,e,f;e=this.callbacks,f=[];for(d in e)c=e[d],f.push(c.call(null,a,b));return f},a.prototype.startTracking=function(){return this.listener=function(a){return AG.compass.triggerCallbacks(a.webkitCompassHeading,a.webkitCompassAccuracy)},window.addEventListener("deviceorientation",this.listener,!0)},a.prototype.stopTracking=function(){return window.removeEventListener("deviceorientation",this.listener,!0),this.listener=null},a}(),j=function(){function a(){this.add=r(this.add,this)}return a.prototype.add=function(a){var b,c,d;if(AG[a.namespace]!=null)throw"Invalid extension namespace";AG[a.namespace]={},d=[];for(b in a)c=a[b],d.push(AG[a.namespace][b]=c);return d},a}(),g=function(){function a(){}return a.prototype.getIPAddress=function(a,b){var c;return c=new AG.Deferred,AG.API.getIPAddress(c.resolve,c.reject),a!=null&&c.done(a),b!=null&&c.fail(b),c},a.prototype.getLocale=function(a,b){var c;return c=new AG.Deferred,AG.API.getUserLocale(c.resolve,c.reject),a!=null&&c.done(a),b!=null&&c.fail(b),c},a.prototype.takeScreenshot=function(a,b){var c;return c=new AG.Deferred,AG.API.takeScreenshot(c.resolve,c.reject),a!=null&&c.done(a),b!=null&&c.fail(b),c},a}(),d=function(){function a(){}return a.prototype.takePicture=function(a,b,c){var d;d=AG.Deferred(),AG.API.takePicture(a,d.resolve,d.reject),b!=null&&d.done(b);if(c!=null)return d.fail(c)},a.prototype.takeVideo=function(a,b,c){var d;d=AG.Deferred(),AG.API.takeVideo(a,d.resolve,d.reject),b!=null&&d.done(b);if(c!=null)return d.fail(c)},a.prototype.choosePicture=function(a,b,c){var d;d=AG.Deferred(),a.title==null&&(a.title="Select source"),a.cancel_button==null&&(a.cancel_button="Cancel"),a.camera_button==null&&(a.camera_button="Open Camera"),a.library_button==null&&(a.library_button="Choose From Library"),AG.API.choosePicture(a.filename,a.camera_button,a.library_button,a.cancel_button,a.title,d.resolve,d.reject),b!=null&&d.done(b);if(c!=null)return d.fail(c)},a.prototype.flashOn=function(a,b){var c;c=AG.Deferred(),AG.API.cameraFlashOn(c.resolve,c.reject),a!=null&&c.done(a);if(b!=null)return c.fail(b)},a.prototype.flashOff=function(a,b){var c;c=AG.Deferred(),AG.API.cameraFlashOff(c.resolve,c.reject),a!=null&&c.done(a);if(b!=null)return c.fail(b)},a.prototype.flashToggle=function(a,b){var c;c=AG.Deferred(),AG.API.cameraFlashToggle(c.resolve,c.reject),a!=null&&c.done(a);if(b!=null)return c.fail(b)},a}(),n=function(){function a(){}return a.prototype.startRecordingAudio=function(a){return AG.API.startRecordingAudio(""+a)},a.prototype.stopRecordingAudio=function(){return AG.API.stopRecordingAudio()},a.prototype.play=function(a){return AG.API.play(""+a)},a}(),h=function(){function a(a){this.event_name=a,this.triggerCallbacks=r(this.triggerCallbacks,this),this.removeAllEventListeners=r(this.removeAllEventListeners,this),this.removeEventListener=r(this.removeEventListener,this),this.addEventListener=r(this.addEventListener,this),this.callbacks={},this.listened=!1}return a.prototype.addEventListener=function(a,b,c){var d;return this.listened||(this.listened=!0,AG.API.addWSEventListener(this.event_name,AG.events[this.event_name].triggerCallbacks,b,c)),d=(new Date).getTime(),this.callbacks[d]=a,d},a.prototype.removeEventListener=function(a){return delete this.callbacks[a]},a.prototype.removeAllEventListeners=function(){return this.callbacks={},this.listened=!1},a.prototype.triggerCallbacks=function(){var a,b,c,d,e;a=1<=arguments.length?s.call(arguments,0):[],d=this.callbacks,e=[];for(c in d)b=d[c],e.push(b.call(a));return e},a}(),i=function(){function a(){this.recordEvent=r(this.recordEvent,this),this.removeAllEventListeners=r(this.removeAllEventListeners,this),this.addEventListener=r(this.addEventListener,this)}return a.prototype.focus=new h("focus"),a.prototype.lostFocus=new h("lostFocus"),a.prototype.addEventListener=function(a,b,c){c==null&&(c={}),typeof b=="function"&&(c.recurring=b);switch(a){case"focus":return this.focus.addEventListener(c.recurring,c.success,c.failure);case"unfocus":case"lostFocus":return this.lostFocus.addEventListener(c.recurring,c.success,c.failure)}},a.prototype.removeAllEventListeners=function(){return AG.API.removeAllWSEventListeners()},a.prototype.recordEvent=function(a,b,c){return AG.API.recordEvent(a,b,c)},a}(),k=function(){function a(){this.cancelDownloads=r(this.cancelDownloads,this),this.remove=r(this.remove,this)}return a.prototype.preview=function(a,b,c){var d;return d=new AG.Deferred,AG.API.previewFile(""+a,d.resolve,d.reject),b!=null&&d.done(b),c!=null&&d.fail(c),d},a.prototype.download=function(a,b,c,d,e){var f;return f=new AG.Deferred,AG.API.downloadFile(""+a,b,f.resolve,f.reject,e),c!=null&&f.done(c),d!=null&&f.fail(d),f},a.prototype.unzip=function(a,b,c,d){var e;return e=new AG.Deferred,AG.API.unzip(""+a,""+b,e.resolve,e.reject),c!=null&&e.done(c),d!=null&&e.fail(d),e},a.prototype.write=function(a,b,c,d){var e;return e=new AG.Deferred,AG.API.writeFile(""+a,b,e.resolve,e.reject),c!=null&&e.done(c),d!=null&&e.fail(d),e},a.prototype.remove=function(a,b,c){var d;return d=new AG.Deferred,AG.API.removeFileOrFolder(""+a,d.resolve,d.reject),b!=null&&d.done(b),c!=null&&d.fail(c),d},a.prototype.cancelDownloads=function(a,b){var c;c=new AG.Deferred,AG.API.cancelAllDownloads(c.resolve,c.reject),a!=null&&c.done(a);if(b!=null)return c.fail(b)},a}(),c=function(){function c(){this.VERSION="0.9.1",typeof AndroidAPIBridge!="undefined"?this.API=new a(new AndroidCommunication):this.API=new a(new WebSocketCommunication),this.GUI=new l,this.accelerometer=new b,this.gyroscope=new m,this.compass=new f,this.device=new g,this.camera=new d,this.media=new n,this.events=new i,this.file=new k,this.extensions=new j}return c.prototype.Deferred=new DeferredEngine,c}(),window.AG=new c,p=function(){function a(a,b){return this.url=a,this.opts=b,this.setup_header=r(this.setup_header,this),this.merge_headers=r(this.merge_headers,this),this.merge_options=r(this.merge_options,this),this.default_headers=r(this.default_headers,this),this.default_opts=r(this.default_opts,this),this.done_handler=r(this.done_handler,this),this.merge_options(),this.request=new XMLHttpRequest,this.request.onreadystatechange=this.done_handler,this.request.open(this.opts.type,this.url),this.setup_header(),this.opts.data!=null?this.request.send(JSON.stringify(this.opts.data)):this.request.send(),this.request}return a.prototype.done_handler=function(){var a,b;if(this.request.readyState===4)return this.request.status===200||this.request.status===201||this.request.status===202?(a=this.opts.success)!=null?a.call(this.request,JSON.parse(this.request.response),this.request.status,this.request):void 0:(b=this.opts.failure)!=null?b.call(this.request,this.request.status,this.request):void 0},a.prototype.default_opts=function(){var a;return a={type:"GET",headers:this.default_headers()},a},a.prototype.default_headers=function(){var a;return a={"Content-Type":"application/json",Accepts:"application/json, text/javascript, text/plain, text/html, */*"},a},a.prototype.merge_options=function(){var a,b,c;c=this.default_opts();for(a in c)b=c[a],this.opts[a]==null&&(this.opts[a]=b);return this.merge_headers()},a.prototype.merge_headers=function(){var a,b,c,d;if(this.opts["headers"]==null)return this.opts.headers=this.default_headers();c=this.default_headers(),d=[];for(a in c)b=c[a],this.opts["headers"][a]==null?d.push(this.opts.headers[a]=b):d.push(void 0);return d},a.prototype.setup_header=function(){var a,b,c,d;if(this.opts.headers!=null){c=this.opts.headers,d=[];for(a in c)b=c[a],d.push(this.request.setRequestHeader(a,b));return d}},a}(),q=function(){function a(a,b){this.send=r(this.send,this)}return a.prototype.send=function(a,b){return new p(a,b)},a.prototype.namespace="ajax",a}(),AG.extensions.add(new q),o=function(){function a(){this.get=r(this.get,this)}return a.prototype.namespace="parameters",a.prototype.get=function(a){var b,c;return b=new RegExp("(\\?|&)"+a+"(\\[\\])?=([^&]*)"),c=window.location.search.match(b),c?c[3]:!1},a}(),AG.extensions.add(new o)}.call(this);